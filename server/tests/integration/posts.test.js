import request from "supertest"; import express from "express"; import mockingoose from "mockingoose"; import Post from "../../src/models/Post.js"; const app=express(); app.use(express.json()); app.get("/posts/:id",async(req,res)=>{const post=await Post.findById(req.params.id);res.json(post);}); describe("GET /posts/:id",()=>{it("should return a mocked post",async()=>{mockingoose(Post).toReturn({_id:"507f1f77bcf86cd799439011",title:"Mocked",content:"Hello"},"findOne");const res=await request(app).get("/posts/507f1f77bcf86cd799439011");expect(res.body.title).toBe("Mocked");expect(res.body.content).toBe("Hello");});});
